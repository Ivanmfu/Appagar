(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5389:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>c,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>u}),t(5480),t(5495),t(5866);var a=t(3191),s=t(8716),n=t(7922),l=t.n(n),i=t(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5480)),"/home/runner/work/Appagar/Appagar/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5495)),"/home/runner/work/Appagar/Appagar/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/runner/work/Appagar/Appagar/src/app/page.tsx"],p="/page",c={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},2472:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},9775:(e,r,t)=>{Promise.resolve().then(t.bind(t,2126))},6287:(e,r,t)=>{Promise.resolve().then(t.bind(t,4497))},4497:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var a=t(326),s=t(4179),n=t(434);function l(){let{profile:e,user:r,loading:t}=(0,s.aC)();return t?a.jsx("main",{className:"p-6 text-sm text-gray-500",children:"Comprobando sesi\xf3n..."}):a.jsx(s.ZP,{children:(0,a.jsxs)("main",{className:"p-6 space-y-4",children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold",children:["Hola, ",e?.display_name??r?.email??"compa\xf1ero/a"]}),a.jsx("p",{className:"text-gray-600",children:"Gestiona tus grupos, a\xf1ade gastos y mant\xe9n el balance al d\xeda."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx(n.default,{className:"bg-black text-white px-4 py-2 rounded",href:"/groups",children:"Ver grupos"}),a.jsx(n.default,{className:"border border-black px-4 py-2 rounded",href:"/groups?new=1",children:"Crear grupo"})]})]})})}},2126:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(326),s=t(4179),n=t(2852),l=t(4976),i=t(7577);function o({children:e}){let[r]=(0,i.useState)(()=>new n.S);return a.jsx(l.aH,{client:r,children:a.jsx(s.Ho,{children:e})})}},4179:(e,r,t)=>{"use strict";t.d(r,{Ho:()=>u,ZP:()=>p,aC:()=>d});var a=t(326),s=t(2777),n=t(5047),l=t(7577);let i=(0,l.createContext)(void 0);async function o(e){if(!e)return null;let r=(0,s.N)(),{data:t,error:a}=await r.from("profiles").select("id, email, display_name").eq("id",e.id).maybeSingle();if(a)return console.error("Error al comprobar el perfil",a),t??null;if(t)return t;let n={id:e.id,email:e.email,display_name:e.user_metadata?.display_name},{data:l,error:i}=await (0,s.N)().from("profiles").upsert(n).select("id, email, display_name").single();return i?(console.error("Error al crear el perfil",i),t??n):l??n}function u({children:e}){(0,n.useRouter)(),(0,n.usePathname)();let[r,t]=(0,l.useState)(null),[u,d]=(0,l.useState)(null),[p,c]=(0,l.useState)(!0),m=(0,s.N)(),x=(0,l.useCallback)(async()=>{c(!0);let{data:e,error:r}=await m.auth.getSession();if(r){console.error("Error al recuperar la sesi\xf3n",r),t(null),d(null),c(!1);return}let a=e.session??null;t(a),d(await o(a?.user??null)??null),c(!1)},[m]),h=(0,l.useMemo)(()=>({session:r,user:r?.user??null,profile:u,loading:p,refresh:x}),[r,u,p,x]);return a.jsx(i.Provider,{value:h,children:e})}function d(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}let p=function({children:e}){let{loading:r,user:t}=d();return r?a.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Cargando sesi\xf3n..."}):t?a.jsx(a.Fragment,{children:e}):null}},2777:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var a=t(3815);let s=globalThis;function n(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!r)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables");return s.__supabaseClient||(s.__supabaseClient=(0,a.eI)(e,r)),s.__supabaseClient}},5495:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(9510);let s=(0,t(8570).createProxy)(String.raw`/home/runner/work/Appagar/Appagar/src/app/providers.tsx#default`);function n({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:a.jsx(s,{children:e})})})}t(5023)},5480:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/home/runner/work/Appagar/Appagar/src/app/page.tsx#default`)},5023:()=>{}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[861,434],()=>t(5389));module.exports=a})();